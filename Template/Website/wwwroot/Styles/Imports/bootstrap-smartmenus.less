@dropped-background: #f5f5f5;
@highlighted-background: #444;
@highlighted-text-color: #fff;

.child-ui-margin(@level) { margin-left: (@level * 8px) !important; }

.common-base() { padding: 0; display: none; list-style: none; }

.collapsed-submenu, .dropped-submenu {

    li { display: block; list-style: none; position: relative;

        &:hover { color: @highlighted-text-color !important; background-color: @highlighted-background !important;

            > a { color: @highlighted-text-color !important; background-color: @highlighted-background !important; }
        }
    }

    a { position: relative; display: block; padding: 13px 20px; padding-right: 58px; line-height: 17px; text-decoration: none; white-space: nowrap;

        span.sub-arrow { position: absolute; top: 50%; margin-top: -17px; left: auto; right: 4px; width: 34px; height: 34px; overflow: hidden; font: bold 14px/34px monospace !important; }
    }

    a.highlighted {
        span.sub-arrow {
            &:before { display: block; content: '-'; }
        }
    }
}

.dropped-submenu ul { .common-base(); background: @dropped-background; }

.collapsed-submenu ul { .common-base(); .child-ui-margin(1);

    ul { .child-ui-margin(2);

        ul { .child-ui-margin(3);

            ul { .child-ui-margin(4);

                ul { .child-ui-margin(5); }
            }
        }
    }
}

.dropped-submenu a span.sub-arrow { right: auto; margin-left: -12px; }

@media (min-width: 768px) {

    .dropped-submenu {

        ul { position: absolute;

            a {
                span.sub-arrow { right: auto; margin-left: -12px; }
            }

            ul {
                a &:hover, &:focus, &:active { .child-ui-margin(3); }

                ul {
                    a &:hover, &:focus, &:active { .child-ui-margin(4); }

                    ul {
                        a &:hover, &:focus, &:active { .child-ui-margin(5); }
                    }
                }
            }
        }
    }

    .dropped-submenu.nav-stacked a span.sub-arrow { right: auto; margin-left: -12px; }
}
